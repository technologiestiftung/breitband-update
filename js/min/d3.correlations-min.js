function d3_correlation(t){function r(t){e=t,l.domain([0,p.length]),u=(n-2*i)/p.length,r.init()}var e,n=300,a=100,i=10,o,p=t,s=[{r:189,g:0,b:38,a:.8},{r:240,g:59,b:32,a:.8},{r:253,g:141,b:60,a:.8},{r:254,g:204,b:92,a:.8},{r:255,g:255,b:178,a:.8}],d=[100,95,75,50,10],c=d3.scale.linear().domain(d).range(s),l=d3.scale.linear().range([0,n-2*i]),u,g=a-2*i,h=d3.scale.linear().domain(d).range([g,.95*g,.75*g,.5*g,.1*g]);return r.init=function(){e.each(function(){var t=d3.select(this);o=t.append("svg").attr("viewBox","0 0 "+n+" "+a).attr("preserveAspectRatio","xMidYMid meet").append("g").attr("transform","translate("+i+","+i+")");var r=t.attr("data-speed"),e=t.attr("data-type");o.selectAll("rect").data(p.sort(function(t,n){return t.properties[e]==n.properties[e]?t.properties[r]-n.properties[r]:t.properties[e]-n.properties[e]})).enter().append("rect").style("stroke","transparent").style("fill",function(t){var e=c(t.properties[r]);return"rgb("+Math.round(e.r)+","+Math.round(e.g)+","+Math.round(e.b)+")"}).attr("x",function(t,r){return l(r)}).attr("width",u).attr("height",function(t){return h(t.properties[r])}).attr("y",function(t){return a-2*i-h(t.properties[r])})}),r.resize()},r.resize=function(){var t=d3.select(".correlation"),r=t.node().getBoundingClientRect();n=r.width,a=n/3,o.style("height",a+"px")},r}